{% if request.page_type == 'product' %}
    <script type="text/javascript">
      var Shopify = Shopify || {};
      console.log('shopify: '+Shopify);
      const selects = document.getElementsByClassName("select__select");
      Shopify.optionsMap = {};

      Shopify.updateOptionsInSelector = function(selectorIndex) {

        switch (selectorIndex) {
          case 0:
            var key = 'root';
            var selector = selects[0];
            break;
          case 1:
            var key = selects[0].value;
            var selector = selects[1];
            break;
          case 2:
            var key = selects[0].value;  
            key += ' / ' + selects[1].value;
            var selector = selects[2];
        }
      }
      
      var initialValue = selector.val();
      selector.empty();    
      var availableOptions = Shopify.optionsMap[key];
      console.log(availableOptions);
    </script>
{% endif %}